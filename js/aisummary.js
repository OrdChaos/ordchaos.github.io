var ordchaosGPT={getTitleAndContent:function(){try{const e=document.title;const n=document.querySelector(ordchaosGPT_postSelector);if(!n){console.warn("ordchaosGPT：找不到文章容器。请尝试将引入的代码放入到文章容器之后。");return""}const r=n.getElementsByTagName("p");const c=n.querySelectorAll("h1, h2, h3, h4, h5");let t="";for(let o of c){t+=o.innerText+" "}for(let o of r){const a=o.innerText.replace(/https?:\/\/[^\s]+/g,"");t+=a}const s=e+" "+t;let o=2500;if(typeof ordchaosGPT_wordLimit!=="undefined"){o=ordchaosGPT_wordLimit}const i=s.slice(0,o);return i}catch(o){console.error("ordchaosGPT错误：可能由于一个或多个错误导致没有正常运行，原因出在获取文章容器中的内容失败，或者可能是在文章转换过程中失败。",o);return""}},fetchordchaosGPT:async function(o,t){const e=`${ordchaosGPT_apiurl}api/index.js?content=${encodeURIComponent(o)}&url=${encodeURIComponent(t)}`;const n=3e4;try{const r=new AbortController;const c=setTimeout(()=>r.abort(),n);const s=await fetch(e,{signal:r.signal});if(s.ok){const i=await s.text();return i}else{throw new Error("请求失败")}}catch(o){if(o.name==="AbortError"){console.error("请求超时");return"获取文章摘要超时。请稍后再试。"}else{console.error("请求失败：",o);return"获取文章摘要失败，请稍后再试。"}}}};function typeWriterEffect(o,t){let e=0;function n(){if(e<o.length){t.innerHTML+=o.charAt(e);e++;setTimeout(n,30)}}t.classList.add("typing");n()}function runordchaosGPT(){const o=ordchaosGPT.getTitleAndContent();if(!o&&o!==""){console.log("ordchaosGPT本次提交的内容为："+o)}const t=window.location.href;ordchaosGPT.fetchordchaosGPT(o,t).then(o=>{document.querySelector(".ocxq-ai-text").innerHTML="";typeWriterEffect(o,document.querySelector(".ocxq-ai-text"))})}runordchaosGPT();